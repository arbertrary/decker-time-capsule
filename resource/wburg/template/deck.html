<!DOCTYPE html>
<!-- This is the pandoc 2.7.3 template for reveal.js output modified for decker. -->
<html$if(lang)$ lang="$lang$"$endif$$if(dir)$ dir="$dir$"$endif$>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
$for(author-meta)$
  <meta name="author" content="$author-meta$">
$endfor$
$if(date-meta)$
  <meta name="dcterms.date" content="$date-meta$">
$endif$
$if(keywords)$
  <meta name="keywords" content="$for(keywords)$$keywords$$sep$, $endfor$">
$endif$
  <meta name="apple-mobile-web-app-capable" content="yes">
$if(template.favicon)$
  <link rel="icon" type="image/png" href="$template.favicon$">
$endif$
  <title>$if(title-prefix)$$title-prefix$ - $endif$$pagetitle$</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <link rel="stylesheet" href="$decker-support-dir$/vendor/reveal/dist/reset.css">
  <link rel="stylesheet" href="$decker-support-dir$/vendor/reveal/dist/reveal.css">
  <link rel="stylesheet" href="$decker-support-dir$/plugins/whiteboard/whiteboard.css">
  <link rel="stylesheet" href="$decker-support-dir$/plugins/menu/menu.css">
  <link rel="stylesheet" href="$decker-support-dir$/plugins/feedback/feedback.css">
  <link rel="stylesheet" href="$decker-support-dir$/examiner/examiner.css">
  <link rel="stylesheet" href="$decker-support-dir$/plugins/explain/explain.css">
  <link rel="stylesheet" href="$decker-support-dir$/vendor/videojs/video-js.min.css">
$if(highlightjs)$
  <link rel="stylesheet" href="$decker-support-dir$/vendor/css/$highlightjs$.css">
$endif$
$if(template.base-css)$
  <link rel="stylesheet" href="$template.base-css$">
$else$
  <link rel="stylesheet" href="$decker-support-dir$/css/decker.css">
$endif$


$for(template.css)$
  <link rel="stylesheet" href="$template.css$"/>
$endfor$

  <style>
        /* This is the global style block for decker's layout css variables (aka css custom properties) 
        for all kinds of parameterization. Variables are set via an according YAML variable 
        which defaults from the default.yaml. 
        Can't be sourced out to external css file since variable substitution is performed
        by pandoc which does not process the css */

        :root {
                /* This is the global variable for the default alignment. Defaults to left.    */
                /* Can be overriden in local YAML and for whole slides or individual elements  */
                --align-global: $align-global$;
                /* Column spacing, in same awkward unit as reveal's margin which is fraction of 
                space. Beware, does strange things if set too large. */
                --margin-columns: calc($margin-columns$ * 100%);
                /* Now all the different font sizes */
                --font-size-base: $font-size-base$;
                --font-size-medium: calc(var(--font-size-base) * 1);
                --font-size-xx-small: calc(var(--font-size-base) * 0.4);
                --font-size-x-small: calc(var(--font-size-base) * 0.6);
                --font-size-small: calc(var(--font-size-base) * 0.8);
                --font-size-large: calc(var(--font-size-base) * 1.2);
                --font-size-x-large: calc(var(--font-size-base) * 1.4);
                --font-size-xx-large: calc(var(--font-size-base) * 1.6);
                /* This one defines the basic vertical spacing between elements */
                --spacing-vertical-base: $spacing-vertical-base$;
                --margin-bottom-elements-base: $spacing-vertical-base$;
                --margin-bottom-h1: calc(var(--margin-bottom-elements-base) * 1);
                --margin-bottom-h2: calc(var(--margin-bottom-elements-base) * 0);
                --margin-bottom-h2-block: calc(var(--margin-bottom-elements-base) * 0.8);
                --margin-bottom-h3: calc(var(--margin-bottom-elements-base) * 0);
                --margin-bottom-h3-block: calc(var(--margin-bottom-elements-base) * 0.8);
                --margin-bottom-p: calc(var(--margin-bottom-elements-base) * 0.8);
                --margin-bottom-ol: calc(var(--margin-bottom-elements-base) * 0.8);
                --margin-bottom-ul: calc(var(--margin-bottom-elements-base) * 0.8);
                --margin-bottom-dl: calc(var(--margin-bottom-elements-base) * 0.8);
                --margin-bottom-figure: calc(var(--margin-bottom-elements-base) * 0.8);
                --margin-bottom-img: calc(var(--margin-bottom-elements-base) * 0.8);
                --margin-bottom-blockquote: calc(var(--margin-bottom-elements-base) * 0.8);
                --margin-bottom-table: calc(var(--margin-bottom-elements-base) * 1);
                --margin-bottom-columns: calc(var(--margin-bottom-elements-base) * 0);       
                --margin-bottom-references: calc(var(--margin-bottom-elements-base) * 0.3);

                /* The next custom properties for the look of the decoration */
                --border-decoration-width: $border-decoration-width$;
                --border-decoration-padding: $border-decoration-padding$;
                --border-decoration-style: $border-decoration-style$;  

                /* whiteboard buttons */
                --whiteboard-icon-size: $whiteboard-icon-size$;
                --whiteboard-active-color: $whiteboard-active-color$;
                --whiteboard-inactive-color: $whiteboard-inactive-color$;
                --whiteboard-background-color: $whiteboard-background-color$;      
        } 
  </style>
   
$if(highlighting-css)$
  <style>
  $highlighting-css$
  </style>
$endif$

<script>
  /* Store JSON encoded Pandoc meta data in a global variable. */
  window.Decker = {meta: $decker-meta$};
</script>
</head>

<body>
  <div class="reveal">
    <div class="slides">

$if(title)$
      <section id="$idprefix$title-slide" class="title-page">
        $if(template.title-page.banner)$
        <div class="title-page banner">
          <img src=$template.title-page.banner$>
        </div>
        $endif$
        <div class="valign-block">
          <div class="valigned">
            <div class="title"> $title$</div>

            $if(subtitle)$
              <div class="subtitle"> $subtitle$ </div>
            $endif$

            $if(template.title-page.teaser-img)$
              <div class="teaser-img">
                <img src=$template.title-page.teaser-img$>
              </div>
            $else$
              <div style="height:100px"> </div>      
            $endif$

            $if(date)$
              <div class="date"> $date$ </div>
            $endif$

            $if(author)$
              <div class="author"> $author$ </div>
            $endif$

            $if(template.title-page.affiliation-logo)$
              <div class="affiliation-logo">
                <img src=$template.title-page.affiliation-logo$>
              </div>
            $endif$

            $if(affiliation)$
              <div class="affiliation"> $affiliation$ </div>
            $endif$ 
          </div>
        </div>
      </section>      
$endif$

$if(toc)$
      <section id="$idprefix$TOC">
      $table-of-contents$
      </section>
$endif$

$body$

    </div>
  </div>

  <script src="$decker-support-dir$/vendor/videojs/video.min.js"></script>
  <script src="$decker-support-dir$/js/decker.js"></script>

$for(template.include-js)$ 
  <script src="$template.include-js$"></script>
$endfor$

$for(template.include-module)$ 
  <script type="module" src="$template.include-module$"></script>
$endfor$

  <link rel="stylesheet" href="$decker-support-dir$/examiner/examiner.css">
  <script type="module">
    import {prepareExaminer} from "./$decker-support-dir$/examiner/examiner.js";
    prepareExaminer();
  </script>

  <script type="module">
    // import Reveal and all plugins
    import Reveal from './$decker-support-dir$/vendor/reveal/dist/reveal.esm.js';
    import deckerPlugin from './$decker-support-dir$/plugins/decker/decker.js';
    import mathPlugin from './$decker-support-dir$/plugins/math/math.js';
    import whiteboardPlugin from './$decker-support-dir$/plugins/whiteboard/whiteboard.js';
    // import sagePlugin from './$decker-support-dir$/plugins/sage/sage.js';
    import searchPlugin from './$decker-support-dir$/plugins/search/search.js';
    import zoomPlugin from './$decker-support-dir$/plugins/zoom/zoom.js';
    import printPlugin from './$decker-support-dir$/plugins/print/print.js';
    // import jinglesPlugin from './$decker-support-dir$/plugins/jingles/jingles.js';
    // import quizPlugin from './$decker-support-dir$/plugins/quiz/quiz.js';
    import quizWuePlugin from './$decker-support-dir$/plugins/quiz-wue/quiz-wue.js';
    import explainPlugin from './$decker-support-dir$/plugins/explain/explain.js';
    import chartsPlugin from './$decker-support-dir$/plugins/charts/charts.js';
    import menuPlugin from './$decker-support-dir$/plugins/menu/menu.js';
    import feedbackPlugin from './$decker-support-dir$/plugins/feedback/feedback.js';
    import highlightPlugin from './$decker-support-dir$/vendor/reveal/plugin/highlight/highlight.esm.js';
    import notesPlugin from './$decker-support-dir$/vendor/reveal/plugin/notes/notes.esm.js';

    let revealConfig = { 
      // reveal configuration (see https://revealjs.com/config/)
      ...Decker.meta.reveal,

      // plugin configuration
      math: { mathjax: String.raw`$decker-support-dir$/vendor/mathjax/`, ...Decker.meta.math },
      chart: Decker.meta.chart,
      menu: Decker.meta.menu,
      explain: Decker.meta.explain,
      feedback: Decker.meta.feedback || Decker.meta["decker-engine"],
      jingles: Decker.meta.jingles,

      // list of plugins
      plugins: [
         deckerPlugin,
         mathPlugin,
         chartsPlugin,
         whiteboardPlugin,
         // sagePlugin,
         searchPlugin,
         printPlugin,
         // jinglesPlugin,
         // quizPlugin,
         quizWuePlugin, 
         explainPlugin,
         // menuPlugin,
         feedbackPlugin,
$if(highlightjs)$
         highlightPlugin,
$endif$
         notesPlugin
      ]
    };

    console.log(revealConfig)
    Reveal.initialize(revealConfig);
  </script>

  </body>
</html>
