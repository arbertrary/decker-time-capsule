name: decker
version: 0.9.0
license: OtherLicense
author: "Henrik Tramberend"
maintainer: "henrik.tramberend@beuth-hochschule.de"
copyright: "2018 Henrik Tramberend"

build-type: Custom

custom-setup:
  dependencies:
    - base >= 4.7 && < 5
    - binary
    - bytestring
    - Cabal
    - conduit
    - directory
    - extra
    - filepath
    - Glob
    - zip

extra-source-files:
  - readme.md
  - Dockerfile
  - makefile
  - src-support/*
  - resource/template/*
  - resource/example/*

synopsis: A markdown based tool for slide deck creation
category: Tool

description: Please see the README at <https://gitlab2.informatik.uni-wuerzburg.de/decker/decker#readme>

dependencies:
  - base >= 4.7 && < 5
  - aeson
  - ansi-terminal
  - array
  - base64-bytestring
  - base16-bytestring
  - blaze-html
  - blaze-markup
  - bytestring
  - containers
  - data-default
  - directory
  - extra
  - filepath
  - fsnotify
  - Glob
  - git
  - groom
  - hashable
  - HTTP
  - http-client
  - http-conduit
  - http-types
  - lens
  - lens-action
  - lens-aeson
  - listsafe
  - MissingH
  - modern-uri
  - monad-loops
  - mtl
  - multimap
  - mustache
  - network-uri
  - pandoc
  - pandoc-citeproc
  - pandoc-types
  - process
  - pureMD5
  - random
  - regex-tdfa
  - scientific
  - shake
  - snap-core
  - snap-server
  - split
  - tagsoup
  - template-haskell
  - text
  - time
  - transformers
  - unordered-containers
  - utf8-string
  - vector
  - websockets
  - websockets-snap
  - wreq
  - yaml
  - zip

library:
  # ghc-options:
  #   - -fwarn-unused-binds 
  #   - -fwarn-unused-imports
  source-dirs: src
  when:
    - condition: os(windows)
      then:
        source-dirs: src-win
        exposed-modules: "System.Decker.OS"
      else:
        source-dirs: src-unix
        exposed-modules: "System.Decker.OS"
    - condition: flag(preextractedresources)
      cpp-options: "-DPREEXTRACTEDRESOURCES"

executables:
  decker:
    main: Decker
    source-dirs: app
    ghc-options:
      - -threaded
      - -rtsopts
      - -with-rtsopts=-N
#     - -fwarn-unused-binds 
#     - -fwarn-unused-imports
    dependencies:
      - decker

tests:
  decker-test:
    main: Spec.hs
    source-dirs: test
    ghc-options:
      - -threaded
      - -rtsopts
      - -with-rtsopts=-N
    dependencies:
      - decker
      - hspec

default-extensions:
  - DeriveDataTypeable
  - EmptyCase
  - FlexibleContexts
  - FlexibleInstances
  - GeneralizedNewtypeDeriving
  - InstanceSigs
  - MultiParamTypeClasses
  - MultiWayIf
  - NoMonomorphismRestriction
  - OverloadedStrings
  - TemplateHaskell
  - TupleSections

flags:
  preextractedresources:
    description: Assumes that the resources are already preextracted and will not extract them again or delete them
    manual: true
    default: false
